import{F as e,c as t,j as r,G as n,H as o,r as a,l as c,s,m as i}from"./vendor.340fb2e9.js";import{r as l}from"./index.9d1b9cfc.js";function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){f(e,t,r[t])}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var d=function(a,c){var s=c.attrs,i=c.slots,l=u({},a,s),d=l.class,g=l.component,m=l.viewBox,v=l.spin,b=l.rotate,y=l.tabindex,O=l.onClick,h=p(l,["class","component","viewBox","spin","rotate","tabindex","onClick"]),w=i.default&&i.default(),j=w&&w.length,S=i.component;e();var x=f({anticon:!0},d,d),E={"anticon-spin":""===v||!!v},C=b?{msTransform:"rotate(".concat(b,"deg)"),transform:"rotate(".concat(b,"deg)")}:void 0,k=u({},n,{viewBox:m,class:E,style:C});m||delete k.viewBox;var B=y;return void 0===B&&O&&(B=-1,h.tabindex=B),t("span",r(h,{role:"img",onClick:O,class:x}),[g?t(g,k,{default:function(){return[w]}}):S?S(k):j?(o(Boolean(m)||1===w.length&&w[0]&&"use"===w[0].type),t("svg",r(k,{viewBox:m}),[w])):null])};d.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String},d.inheritAttrs=!1,d.displayName="Icon";var g=d;function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){v(e,t,r[t])}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=new Set;function O(e){return"string"==typeof e&&e.length&&!y.has(e)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e[t];if(O(r)){var n=document.createElement("script");n.setAttribute("src",r),n.setAttribute("data-namespace",r),e.length>t+1&&(n.onload=function(){h(e,t+1)},n.onerror=function(){h(e,t+1)}),y.add(r),document.body.appendChild(n)}}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.scriptUrl,n=e.extraCommonProps,o=void 0===n?{}:n;"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(r)?h(r.reverse()):h([r]));var a=function(e,r){var n=r.attrs,a=r.slots,c=m({},e,n),s=c.type,i=b(c,["type"]),l=a.default&&a.default(),u=null;s&&(u=t("use",{"xlink:href":"#".concat(s)},null)),l&&l.length&&(u=l);var f=m({},o,i);return t(g,f,{default:function(){return[u]}})};return a.props={spin:Boolean,rotate:Number,type:String},a.inheritAttrs=!1,a.displayName="Iconfont",a}({scriptUrl:"https://at.alicdn.com/t/font_2637962_voky2m76mr.js"});const j=(e,t)=>"folder"==t?"folder":(e&&(e=e.toLowerCase().split(".").pop()||""),["mp4","mpeg","wmv","webm","avi","rmvb","mov","mkv","f4v","flv"].includes(e)?"video":["mp3","m4a","wav","wma","ape","flac","ogg"].includes(e)?"audio":["doc","docx","wps"].includes(e)?"word":["pdf"].includes(e)?"pdf":["doc","docx","ppt","pptx","xls","xlsx","pdf","txt","yaml","ini","cfg"].includes(e)?"doc":["jpg","jpeg","png","gif","bmp","tiff","wmf","tif"].includes(e)?"image":["zip","rar","7z","tar","gz","gz2"].includes(e)?"archive":"other"),S=e=>{if(null==e||isNaN(e))return"-";let t=0;for(;e>=1024;)e/=1024,t++;return Math.floor(100*e)/100+" "+["B","KB","MB","GB","TB","PB","EB"][t]},x=e=>e>9?e:"0"+e,E=e=>{if(!e)return"-";const t=new Date(e),r=(new Date).getFullYear();let n=x(t.getMonth()+1)+"/"+x(t.getDay())+" "+x(t.getHours())+":"+x(t.getMinutes());return r!=t.getFullYear()&&(n=t.getFullYear()+"/"+n),n},C=e=>{const t=e.split(".").pop()||"";return["mp3","m4a","acc","wav","ogg"].includes(t)},k=e=>{const t=e.split(".").pop()||"";return["mpeg","mp4","mkv"].includes(t)},B=e=>{const t=e.split(".").pop()||"";return["mp3","m4a","acc","wav","ogg"].includes(t)?"audio":["mpeg","mp4","mkv"].includes(t)?"video":void 0},P=(N="Blob",e=>Object.prototype.toString.call(e)===`[object ${N}]`);var N;const A=(e,t)=>{let r;if(r="string"==typeof e?((e,t)=>{let r;try{r=new Blob([e],{type:"application/octet-stream"})}catch(n){}return r})(e):e,P(r)){const e=window.URL||window.webkitURL,n=document.createElement("a");n.href=e.createObjectURL(r),n.download=t;const o=document.createEvent("MouseEvents");o.initEvent("click",!1,!1),n.dispatchEvent(o),e.revokeObjectURL(n.href)}},R=(e=!1)=>{const t=a(e);return[t,{toggle:()=>{t.value=!0!==t.value},setTrue:()=>t.value=!0,setFalse:()=>t.value=!1}]},T=e=>{const t=c(e);return[t,(e=[])=>{Object.keys(t).filter((t=>!e.includes(t))).forEach((e=>Reflect.deleteProperty(t,e)))}]},L=(e={})=>{const t=c(e);return[t,(e,r=!1)=>(Object.keys(e).forEach((r=>{Reflect.set(t,r,e[r])})),t),()=>(Object.keys(t).forEach((e=>Reflect.deleteProperty(t,e))),t)]},_=()=>{if(_.instance)return _.instance;const e=c({}),[t,{setFalse:r}]=R(!0),n=a(0),o=e=>{s.set("ACCESS_TOKEN",e),l.setting().then((e=>{e.error?401==e.error.code&&(s.remove("ACCESS_TOKEN"),n.value=2,e.error.message&&i.error(e.error.message)):(n.value=1,u(e.data)),r()}))},u=t=>{for(const r in t)e[r]=t[r]};return!e.token&&s.get("ACCESS_TOKEN")?o(s.get("ACCESS_TOKEN")):(n.value=2,r()),_.instance={signout:()=>{s.remove("ACCESS_TOKEN"),n.value=2,Object.keys(e).forEach((t=>Reflect.deleteProperty(e,t)))},reload:()=>{l.reload().then((e=>{e.status?i.error(e.msg):i.success("操作成功")}))},loginState:n,isLoading:t,getValue:t=>e[t],config:e,setConfig:e=>{l.saveSetting(e).then((e=>{e.error?i.error(e.error.message||"error"):u(e.data)}))},getConfig:o,exportConfig:()=>{l.exportSetting().then((e=>{e.status?i.error(e.msg):A(JSON.stringify(e),"config.json")}))},clearCache:()=>{l.clearCache().then((e=>{e.status?i.error(e.msg):i.success("操作成功")}))}}},F=()=>{const e=c({});return l.config().then((t=>{if(!t.error)for(const r in t.data)e[r]=t.data[r]})),{config:e}};export{w as I,F as a,S as b,R as c,C as d,k as e,_ as f,j as g,T as h,B as i,E as t,L as u};
